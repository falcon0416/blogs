(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{502:function(s,t,a){"use strict";a.r(t);var e=a(2),r=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"ubuntu-文件管理软件安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-文件管理软件安装"}},[s._v("#")]),s._v(" Ubuntu 文件管理软件安装")]),s._v(" "),t("h2",{attrs:{id:"ubuntu-的安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu-的安装"}},[s._v("#")]),s._v(" Ubuntu 的安装")]),s._v(" "),t("p",[s._v("参考： https://www.cnblogs.com/masbay/p/10745170.html")]),s._v(" "),t("h2",{attrs:{id:"开启-ssh-服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开启-ssh-服务"}},[s._v("#")]),s._v(" 开启 ssh 服务")]),s._v(" "),t("p",[s._v("Ubuntu 默认不会开启 ssh 服务。所以我们无法对 Ubuntu 进行远程连接，这对 Ubuntu 的运维造成了很大不便。本文详细讲解如何在 Ubuntu18 下开启 ssh 服务。")]),s._v(" "),t("p",[t("em",[s._v("关键指令(root 用户下，非 root 用户所有指令前加 sudo)")])]),s._v(" "),t("p",[t("strong",[s._v("*ps -e | grep ssh（查看 ssh 服务是否开启）*")])]),s._v(" "),t("p",[t("strong",[s._v("*apt-get install openssh-client（安装 ssh 客户端程序）*")])]),s._v(" "),t("p",[t("strong",[s._v("*apt-get install openssh-server（安装 ssh 服务端程序）*")])]),s._v(" "),t("p",[t("strong",[s._v("*service ssh start 或者 /etc/init.d/ssh start（开启 ssh 服务）*")])]),s._v(" "),t("p",[t("strong",[s._v("*service ssh stop 或者 /etc/init.d/ssh stop（关闭 ssh 服务）*")])]),s._v(" "),t("p",[t("strong",[s._v("*指令 1：ps -e | grep ssh（ 查看 ssh 服务是否开启）*")])]),s._v(" "),t("p",[s._v("运行**"),t("em",[s._v("ps -e | grep ssh")]),s._v("**得出如图一的两行结果。ssh-agent 指的是 ubuntu 的 ssh 服务的客户端，用于该 ubuntu 远程连接其它 Linux 主机。sshd 指的是 ubuntu 的 ssh 服务的服务端，用于其它主机通过 ssh 服务连接该主机。")]),s._v(" "),t("p",[s._v("换句话说，如果没有 sshd 进程的话，别的系统是不能连接该 ubuntu 主机的，若是没有 ssh-agent 的话，该 ubuntu 主机也无法通过 ssh 连接其它主机。")]),s._v(" "),t("p",[t("strong",[s._v("*指令 2：apt-get install openssh-client（安装 ssh 客户端程序）*")])]),s._v(" "),t("p",[s._v("若是运行***ps -e | grep ssh*"),t("strong",[s._v("没有查出 ssh-agent 服务，但是你又想通过 ssh 服务连接别的系统。那么就执行")]),s._v("*apt-get install openssh-client*"),t("strong",[s._v("安装 ssh 客户端。接着执行")]),t("em",[s._v("ssh 目标用户@目标 ip")]),s._v("**即可连接目标主机。正常情况 Ubuntu 默认开启 ssh-agent 服务。所以一般用不打指令 2。")]),s._v(" "),t("p",[t("strong",[s._v("*指令 3：apt-get install openssh-server（安装 ssh 服务端程序）*")])]),s._v(" "),t("p",[s._v("默认 ssh 的服务端是没有安装的，可用***ps -e | grep ssh*"),t("strong",[s._v("查看。若是没有 sshd 的进程，则运行")]),t("em",[s._v("apt-get install openssh-server")]),s._v("**安装 ssh 服务端。接着重新执行 ps -e | grep ssh 便可发现 sshd 已启动。至此，其它主机便可通过 ssh 连接该主机。")]),s._v(" "),t("p",[s._v("sshd 和 ssh-agent 都已经启动。其它主机便可通过 ssh 连接该主机")]),s._v(" "),t("p",[t("strong",[s._v("*指令 4：service ssh start 或者 /etc/init.d/ssh start（开启 ssh 服务）*")])]),s._v(" "),t("p",[t("strong",[s._v("*指令 5：service ssh stop 或者 /etc/init.d/ssh stop（关闭 ssh 服务）*")])]),s._v(" "),t("p",[s._v("指令 4 和指令 5 便是开启和关闭 sshd 服务进程的。")]),s._v(" "),t("p",[s._v("以上便是 Ubuntu18 下安装开启 ssh 进程的所有流程。\n来源：https://www.jianshu.com/p/4b50b55ebb4d")]),s._v(" "),t("h3",{attrs:{id:"问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#问题"}},[s._v("#")]),s._v(" 问题")]),s._v(" "),t("h4",{attrs:{id:"ssh连服务器提示-permission-denied-publickey-的原因与解决办法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ssh连服务器提示-permission-denied-publickey-的原因与解决办法"}},[s._v("#")]),s._v(" SSH连服务器提示“Permission denied(publickey,...).”的原因与解决办法")]),s._v(" "),t("p",[t("strong",[s._v("原因分析：")])]),s._v(" "),t("p",[s._v("错误提示的大意是拒绝许可，括号中的各种验证失败或未能验证")]),s._v(" "),t("p",[t("strong",[s._v("解决办法：")])]),s._v(" "),t("p",[s._v("（1）编辑/etc/ssh/sshd_config配置文件：")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" /etc/ssh/sshd_config \n")])])]),t("p",[s._v("（2）将  第34行左右的  PermitRootLogin 设置为 yes  第58行左右的 PasswordAuthentication 设置为yes，如下图")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://s2.loli.net/2023/01/13/jStr2PTyRCYdoDV.png",alt:"image-20220527213951303"}})]),s._v(" "),t("p",[s._v("（3）重启sshd服务")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" systemctl restart sshd\n")])])]),t("h2",{attrs:{id:"samba-共享文件服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#samba-共享文件服务"}},[s._v("#")]),s._v(" Samba 共享文件服务")]),s._v(" "),t("p",[s._v("参考：https://www.linuxidc.com/Linux/2018-11/155466.htm")]),s._v(" "),t("h2",{attrs:{id:"ftp-文件传输服务"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ftp-文件传输服务"}},[s._v("#")]),s._v(" FTP 文件传输服务")]),s._v(" "),t("p",[s._v("安装完 ssh 就可以使用 sftp ，也可以再装一个 vsftpd")]),s._v(" "),t("p",[s._v("运行：sudo apt-get install vsftpd 命令，安装 VSFTP 工具")]),s._v(" "),t("p",[s._v("安装好了之后，使用如下命令启动 FTP 服务：")]),s._v(" "),t("p",[s._v("sudo systemctl start vsftpd\nsudo systemctl enable vsftpd")]),s._v(" "),t("p",[s._v("查看是否开启")]),s._v(" "),t("p",[s._v("sudo ss -tunlp | grep -i ftp")]),s._v(" "),t("h2",{attrs:{id:"gitlab"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#gitlab"}},[s._v("#")]),s._v(" Gitlab")]),s._v(" "),t("h3",{attrs:{id:"安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[s._v("#")]),s._v(" 安装")]),s._v(" "),t("p",[s._v("gitlab 企业版 --\x3e ee")]),s._v(" "),t("p",[s._v("gitlab 社区版 --\x3e ce")]),s._v(" "),t("blockquote",[t("p",[s._v("tip 官方文档很详细 建议查看官方文档")])]),s._v(" "),t("p",[s._v("官方社区版安装教程：https://docs.gitlab.com/ce/install/")]),s._v(" "),t("p",[s._v("推荐使用 docker 容器方式：")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://docs.gitlab.com/omnibus/docker/",target:"_blank",rel:"noopener noreferrer"}},[s._v("docker容器方式安装教程"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"language-bash extra-class"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("docker")]),s._v(" run "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--detach")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--hostname")]),s._v(" gitlab.example.com "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--publish")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9443")]),s._v(":443 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--publish")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9080")]),s._v(":80 "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--publish")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9022")]),s._v(":22 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--name")]),s._v(" gitlab "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--restart")]),s._v(" always "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--volume")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$GITLAB_HOME")]),s._v("/config:/etc/gitlab "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--volume")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$GITLAB_HOME")]),s._v("/logs:/var/log/gitlab "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--volume")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$GITLAB_HOME")]),s._v("/data:/var/opt/gitlab "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  --shm-size 256m "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  gitlab/gitlab-ce:latest\n")])])]),t("p",[t("a",{attrs:{href:"https://docs.gitlab.com/ee/install/docker.html#configuration",target:"_blank",rel:"noopener noreferrer"}},[s._v("docker容器方式配置教程"),t("OutboundLink")],1)]),s._v(" "),t("h1",{attrs:{id:"内网穿透"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#内网穿透"}},[s._v("#")]),s._v(" 内网穿透")]),s._v(" "),t("h2",{attrs:{id:"zerotier-one"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#zerotier-one"}},[s._v("#")]),s._v(" ZeroTier One")]),s._v(" "),t("h3",{attrs:{id:"安装-zerotier-one-内网穿透"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-zerotier-one-内网穿透"}},[s._v("#")]),s._v(" 安装 ZeroTier One 内网穿透")]),s._v(" "),t("p",[s._v("官网：https://www.zerotier.com/")]),s._v(" "),t("p",[s._v("使用这行命令安装 ZeroTier One")]),s._v(" "),t("p",[s._v("curl -s https://install.zerotier.com/ | sudo bash")]),s._v(" "),t("p",[s._v("复制下面代码，将 NetWork ID 从 zerotier 官方网站中复制到下面代码中")]),s._v(" "),t("p",[s._v("sudo zerotier-cli join （NetWork ID）")]),s._v(" "),t("p",[s._v("若出现”200 join OK”则添加成功")]),s._v(" "),t("h2",{attrs:{id:"frp"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#frp"}},[s._v("#")]),s._v(" frp")]),s._v(" "),t("h3",{attrs:{id:"安装-frp-内网穿透"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装-frp-内网穿透"}},[s._v("#")]),s._v(" 安装 frp 内网穿透")]),s._v(" "),t("p",[t("a",{attrs:{href:"https://gofrp.org/docs/setup/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官方文档"),t("OutboundLink")],1)]),s._v(" "),t("h4",{attrs:{id:"下载"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#下载"}},[s._v("#")]),s._v(" 下载")]),s._v(" "),t("p",[s._v("目前可以在 Github 的 "),t("a",{attrs:{href:"https://github.com/fatedier/frp/releases",target:"_blank",rel:"noopener noreferrer"}},[s._v("Release"),t("OutboundLink")],1),s._v(" 页面中下载到最新版本的客户端和服务端二进制文件，所有文件被打包在一个压缩包中。")]),s._v(" "),t("h4",{attrs:{id:"部署"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#部署"}},[s._v("#")]),s._v(" 部署")]),s._v(" "),t("p",[s._v("解压缩下载的压缩包，将其中的 frpc 拷贝到内网服务所在的机器上，将 frps 拷贝到具有公网 IP 的机器上，放置在任意目录。")]),s._v(" "),t("h4",{attrs:{id:"开始使用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开始使用"}},[s._v("#")]),s._v(" 开始使用")]),s._v(" "),t("p",[s._v("编写配置文件，先通过 "),t("code",[s._v("./frps -c ./frps.ini")]),s._v(" 启动服务端，再通过 "),t("code",[s._v("./frpc -c ./frpc.ini")]),s._v(" 启动客户端。如果需要在后台长期运行，建议结合其他工具使用，例如 "),t("code",[s._v("systemd")]),s._v(" 和 "),t("code",[s._v("supervisor")]),s._v("。")]),s._v(" "),t("p",[s._v("如果是 Windows 用户，需要在 cmd 终端中执行命令。")]),s._v(" "),t("p",[s._v("配置文件如何编写可以参考 "),t("a",{attrs:{href:"https://gofrp.org/docs/examples/",target:"_blank",rel:"noopener noreferrer"}},[s._v("示例"),t("OutboundLink")],1),s._v(" 中的内容。")]),s._v(" "),t("p",[s._v("这个示例通过简单配置 TCP 类型的代理让用户访问到内网的服务器。")]),s._v(" "),t("h3",{attrs:{id:"阿里云配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#阿里云配置"}},[s._v("#")]),s._v(" 阿里云配置")]),s._v(" "),t("p",[s._v("需要开启防火墙 中的对应端口  "),t("code",[s._v("7000")]),s._v(" "),t("code",[s._v("6000")]),s._v(" ...")]),s._v(" "),t("h3",{attrs:{id:"通过-ssh-访问内网机器"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#通过-ssh-访问内网机器"}},[s._v("#")]),s._v(" 通过 SSH 访问内网机器")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("在具有公网 IP 的机器上部署 frps，修改 frps.ini 文件，这里使用了最简化的配置，设置了 frp 服务器用户接收客户端连接的端口：")]),s._v(" "),t("div",{staticClass:"language-ini extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ini"}},[t("code",[t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("common")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("bind_port")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("7000 # 用于与 frpc 连接")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("在需要被访问的内网机器上（SSH 服务通常监听在 22 端口）部署 frpc，修改 frpc.ini 文件，假设 frps 所在服务器的公网 IP 为 x.x.x.x：")]),s._v(" "),t("div",{staticClass:"language-ini extra-class"},[t("pre",{pre:!0,attrs:{class:"language-ini"}},[t("code",[t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("common")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("server_addr")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("test.com")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("server_port")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("7000  # 用于与 frps 连接")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token section"}},[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),t("span",{pre:!0,attrs:{class:"token section-name selector"}},[s._v("ssh")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")])]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("type")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("tcp")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("local_ip")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("127.0.0.1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("local_port")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("22")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token key attr-name"}},[s._v("remote_port")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token value attr-value"}},[s._v("6000  # 代理 访问 test.com:6000 相当于访问 127.0.0.1:22")]),s._v("\n")])])]),t("p",[t("code",[s._v("local_ip")]),s._v(" 和 "),t("code",[s._v("local_port")]),s._v(" 配置为本地需要暴露到公网的服务地址和端口。"),t("code",[s._v("remote_port")]),s._v(" 表示在 frp 服务端监听的端口，访问此端口的流量将会被转发到本地服务对应的端口。")])]),s._v(" "),t("li",[t("p",[s._v("分别启动 frps 和 frpc。")])]),s._v(" "),t("li",[t("p",[s._v("通过 SSH 访问内网机器，假设用户名为 test：")]),s._v(" "),t("p",[t("code",[s._v("ssh -oPort=6000 test@x.x.x.x")])]),s._v(" "),t("p",[s._v("frp 会将请求 "),t("code",[s._v("x.x.x.x:6000")]),s._v(" 的流量转发到内网机器的 22 端口。")]),s._v(" "),t("p",[s._v("MEIFGMOCJGAGTQFR")])])])])}),[],!1,null,null,null);t.default=r.exports}}]);