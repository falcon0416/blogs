(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{511:function(s,t,e){"use strict";e.r(t);var a=e(2),r=Object(a.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h3",{attrs:{id:"步骤一-获取模板-id-创建模板"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤一-获取模板-id-创建模板"}},[s._v("#")]),s._v(" 步骤一：获取模板 ID（创建模板）")]),s._v(" "),t("p",[s._v("在微信公众平台手动配置获取模板 ID：\n登录 "),t("a",{attrs:{href:"https://mp.weixin.qq.com/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://mp.weixin.qq.com"),t("OutboundLink")],1),s._v(" 获取模板，如果没有合适的模板，可以申请添加新模板，审核通过后可使用。")]),s._v(" "),t("h3",{attrs:{id:"步骤二-获取下发权限-提示用户订阅"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤二-获取下发权限-提示用户订阅"}},[s._v("#")]),s._v(" 步骤二：获取下发权限（提示用户订阅）")]),s._v(" "),t("p",[s._v("一次性订阅消息、长期订阅消息，详见接口 "),t("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api/open-api/subscribe-message/wx.requestSubscribeMessage.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("wx.requestSubscribeMessage"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("设备订阅消息，详见接口 "),t("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api/open-api/subscribe-message/wx.requestSubscribeDeviceMessage.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("wx.requestSubscribeDeviceMessage"),t("OutboundLink")],1)]),s._v(" "),t("h4",{attrs:{id:"订阅消息事件推送"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#订阅消息事件推送"}},[s._v("#")]),s._v(" 订阅消息事件推送")]),s._v(" "),t("p",[s._v("用户在点击确定订阅后， 可以由微信自动推送给后台\n需要在后台[开发管理] -> [开发设置] -> [消息推送] 中配置")]),s._v(" "),t("p",[s._v("数据：")]),s._v(" "),t("div",{staticClass:"language-json extra-class"},[t("pre",{pre:!0,attrs:{class:"language-json"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"CreateTime"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1648111936")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"Event"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"subscribe_msg_popup_event"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"FromUserName"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"List"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"PopupScene"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"0"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"SubscribeStatusString"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"accept"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"TemplateId"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx-vmXRthIj1sccsdd8XN-0kTQSj2U"')]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"MsgType"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"event"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"ToUserName"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"userInfo"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"appId"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token property"}},[s._v('"openId"')]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"xxx"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])])]),t("h3",{attrs:{id:"步骤三-调用接口下发订阅消息-推送消息"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#步骤三-调用接口下发订阅消息-推送消息"}},[s._v("#")]),s._v(" 步骤三：调用接口下发订阅消息（推送消息）")]),s._v(" "),t("p",[s._v("一次性订阅消息、长期订阅消息，详见服务端接口 "),t("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/subscribe-message/subscribeMessage.send.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("subscribeMessage.send"),t("OutboundLink")],1)]),s._v(" "),t("p",[s._v("设备订阅消息，详见服务端接口 "),t("a",{attrs:{href:"https://developers.weixin.qq.com/miniprogram/dev/api-backend/open-api/hardware-device/hardwareDevice.send.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("hardwareDevice.send"),t("OutboundLink")],1)]),s._v(" "),t("h3",{attrs:{id:"常见问题"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#常见问题"}},[s._v("#")]),s._v(" 常见问题")]),s._v(" "),t("p",[s._v("小程序一次订阅只能推送一次")])])}),[],!1,null,null,null);t.default=r.exports}}]);